{"version":3,"sources":["webpack:///./src/pages/base-page/index.js","webpack:///./src/pages/sales/sales-header.js","webpack:///./src/pages/sales/index.js","webpack:///./src/constants/index.js","webpack:///./src/components/notification/index.js","webpack:///./src/utils/fetch-json.js","webpack:///./src/components/sortable-table/index.js","webpack:///./src/components/range-picker/index.js"],"names":["BasePage","constructor","path","this","element","document","createElement","innerHTML","template","firstElementChild","subElements","getSubElements","components","getComponents","Object","keys","forEach","key","append","initEventListeners","parent","result","subElement","querySelectorAll","dataset","remove","destroy","values","component","header","id","title","sortable","sortType","sortFunction","value1","value2","Date","getTime","data","toLocaleDateString","LOCALE","year","month","day","toLocaleString","Page","super","event","updateComponents","createdAt_gte","detail","from","toISOString","createdAt_lte","to","addEventListener","onDateSelect","today","setMonth","getMonth","rangePicker","RangePicker","sortableTable","SortableTable","url","ORDERS_REST_URL","sorted","order","searchParams","update","catch","error","Notification","message","type","NOTIFICATION_TYPE","show","ORDERS_URL","SALES_URL","CUSTOMERS_URL","BESTSELLERS_URL","PRODUCTS_REST_URL","CATEGORIES_REST_URL","SUBCATEGORIES_REST_URL","BACKEND_URL","process","IMGUR_UPLOAD_URL","IMGUR_CLIENT_ID","success","duration","render","body","currentNotification","timeoutId","setTimeout","clearTimeout","params","response","fetch","toString","err","FetchError","ok","errorText","statusText","json","status","Error","window","reason","alert","headerConfig","sortLocally","find","item","scrollable","rowUrl","isRunning","scrollY","innerHeight","documentElement","scrollHeight","start","length","end","pageSize","loadData","finally","column","target","closest","sort","asc","desc","URL","sortOnClient","updateSort","renderRows","sortData","sortOnServer","onPointerDown","onWindowScroll","set","String","classList","add","fetchJson","appendRows","setSearchParam","name","value","delete","entries","arrow","querySelector","appendChild","toggleEmpty","getTableRows","push","rows","childNodes","map","getHeaderCell","join","row","getRowTemplate","getTableRow","removeEventListener","sortedColumn","string","localeCompare","caseFirst","number","custom","direction","getWeekday","date","getDay","WEEKDAYS","Array","fill","_","index","setDate","d1","d2","weekday","MONTHS","contains","closeSelector","openSelector","button","selectedDate","selectionStarted","selectionFrom","clearSelection","getSelection","Math","selectedRange","doSelection","updateInput","calendarVisibleFrom","addMonth","updateCalendar","firstDayOfMonth","newDate","numberOfMonthsToAdd","addDay","numberOfDaysToAdd","getDate","Intl","DateTimeFormat","format","buildSelector","dateFrom","selector","getCalendarMonth","getLeft","moveBackward","getRight","moveForward","getDates","renderDate","fromDate","dates","current","style","input","onInputClick","onSelectorClick","onExternalClick","capture","childElementCount","textContent","dispatchEvent","CustomEvent","bubbles","tokens","selectors"],"mappings":"kQAAe,MAAMA,EAKnBC,YAAYC,GAAM,8CAHJ,IAGI,oBAFL,IAMb,eAcE,OAbAC,KAAKC,QAAUC,SAASC,cAAc,OACtCH,KAAKC,QAAQG,UAAYJ,KAAKK,SAC9BL,KAAKC,QAAUD,KAAKC,QAAQK,kBAC5BN,KAAKO,YAAcP,KAAKQ,eAAeR,KAAKC,SAE5CD,KAAKS,iBAAmBT,KAAKU,gBAE7BC,OAAOC,KAAKZ,KAAKS,YAAYI,QAAQC,IACnCd,KAAKO,YAAYO,GAAKC,OAAOf,KAAKS,WAAWK,GAAKb,WAGpDD,KAAKgB,qBAEEhB,KAAKC,QAGde,sBAIA,eACE,MAAQ,cAGVR,eAAeS,GACb,MAAMC,EAAS,GAEf,IAAK,MAAMC,KAAcF,EAAOG,iBAAiB,kBAC/CF,EAAOC,EAAWE,QAAQpB,SAAWkB,EAEvC,OAAOD,EAGT,sBACE,MAAO,GAGTI,SACMtB,KAAKC,SACPD,KAAKC,QAAQqB,SAIjBC,UACEvB,KAAKsB,SACLtB,KAAKC,QAAU,KACfD,KAAKO,YAAc,GACnBI,OAAOa,OAAOxB,KAAKS,YAAYI,QAAQY,GAAaA,EAAUF,WAC9DvB,KAAKS,WAAa,M,4HCRPiB,MAhDA,CACb,CACEC,GAAI,KACJC,MAAO,KACPC,UAAU,EACVC,SAAU,UAEZ,CACEH,GAAI,OACJC,MAAO,SACPC,UAAU,EACVC,SAAU,UAEZ,CACEH,GAAI,YACJC,MAAO,OACPC,UAAU,EACVC,SAAU,SACVC,aAAc,CAACC,EAAQC,IAAW,IAAIC,KAAKF,GAAQG,UAAY,IAAID,KAAKD,GAAQE,UAChF9B,SAAU+B,GACA,2DAEF,IAAIF,KAAKE,GAAMC,mBAAmBC,IAAQ,CAAEC,KAAM,UAAWC,MAAO,OAAQC,IAAK,uCAK3F,CACEd,GAAI,YACJC,MAAO,YACPC,UAAU,EACVC,SAAU,SACVzB,SAAU+B,GACA,4DAEDA,EAAKM,eAAeJ,gCAK/B,CACEX,GAAI,WACJC,MAAO,SACPC,UAAU,EACVC,SAAU,WCvCC,MAAMa,UAAa9C,UAQhCC,YAAYC,G,UACV6C,MAAM7C,G,EARO8C,IACb7C,KAAK8C,iBAAiB,CACpBC,cAAe,IAAIb,KAAKW,EAAMG,OAAOC,MAAMC,cAC3CC,cAAe,IAAIjB,KAAKW,EAAMG,OAAOI,IAAIF,kB,EAI3B,kB,EAAA,M,sFAIlBlC,qBACEhB,KAAKC,QAAQoD,iBAAiB,cAAerD,KAAKsD,cAGpD,eACE,MAAQ,uTAWV,sBACE,MAAMC,EAAQ,IAAIrB,KAEZkB,EAAK,IAAIlB,KAAKqB,GACdN,EAAO,IAAIf,KAAKqB,EAAMC,SAASD,EAAME,WAAa,IAYxD,MAAO,CACLC,YAXkB,IAAIC,IAAY,CAACV,OAAMG,OAYzCQ,cAVoB,IAAIC,IAAcnC,EAAQ,CAC9CoC,IAAM,GAAEC,qBAAiCd,EAAKC,+BAA+BE,EAAGF,gBAChFc,OAAQ,CACNrC,GAAI,YACJsC,MAAO,WAUb,uBAAuBC,EAAe,IACpClE,KAAKS,WAAWmD,cAAcO,OAAOD,GAClCE,MAAMC,GAAS,IAAIC,IAAaD,EAAME,QAAS,CAACC,KAAMC,IAAkBJ,QAAQK,W,6BC3DvF,0bAAO,MAAMC,EAAa,uBACbC,EAAY,sBACZC,EAAgB,0BAChBC,EAAkB,4BAElBC,EAAoB,oBACpBC,EAAsB,sBACtBC,EAAyB,yBACzBlB,EAAkB,kBAElBmB,EAAcC,mCACdC,EAAmBD,gCACnBE,EAAkBF,kBAElB7C,EAAS6C,QAETV,EAAoB,CAC/Ba,QAAS,UACTjB,MAAO,U,+DClBM,MAAMC,EAInBxE,YAAYyE,EAAU,IAAI,SAACgB,EAAW,IAAZ,KAAkBf,EAAO,IAAM,IACvDxE,KAAKuE,QAAUA,EACfvE,KAAKuF,SAAWA,EAChBvF,KAAKwE,KAAOA,EACZxE,KAAKwF,SAGPA,SACExF,KAAKC,QAAUC,SAASC,cAAc,OACtCH,KAAKC,QAAQG,UAAa,iDACgBJ,KAAKwE,6EACYxE,KAAKuE,oCAGhEvE,KAAKC,QAAUD,KAAKC,QAAQK,kBAG9BoE,KAAKzE,EAAUC,SAASuF,MAClBnB,EAAaoB,qBACfpB,EAAaoB,oBAAoBpE,SAGnCrB,EAAQc,OAAOf,KAAKC,SAEpBD,KAAK2F,UAAYC,WAAW,KAAO5F,KAAKsB,UAAWtB,KAAKuF,UACxDjB,EAAaoB,oBAAsB1F,KAGrCsB,SACMtB,KAAKC,SACPD,KAAKC,QAAQqB,SAEfuE,aAAa7F,KAAK2F,WAGpBpE,UACEvB,KAAKsB,SACLtB,KAAKC,QAAU,KACfqE,EAAaoB,oBAAsB,M,YAxCR,M,6BAFVpB,G,oHCIN,mBAAeR,EAAKgC,GACjC,IAAIC,EASAN,EAPJ,IAEEM,QAAiBC,MAAMlC,EAAImC,WAAYH,GACvC,MAAMI,GACN,MAAM,IAAIC,EAAWJ,EAAU,+BAKjC,IAAKA,EAASK,GAAI,CAChB,IAAIC,EAAYN,EAASO,WAEzB,IACEb,QAAaM,EAASQ,OAEtBF,EAAaZ,EAAKpB,OAASoB,EAAKpB,MAAME,SAAakB,EAAKrD,MAAQqD,EAAKrD,KAAKiC,OAASoB,EAAKrD,KAAKiC,MAAME,SAAY8B,EAC/G,MAAOhC,IAET,IAAIE,EAAW,SAAQwB,EAASS,WAAWH,IAE3C,MAAM,IAAIF,EAAWJ,EAAUN,EAAMlB,GAGvC,IACE,aAAawB,EAASQ,OACtB,MAAML,GACN,MAAM,IAAIC,EAAWJ,EAAU,KAAMG,EAAI3B,WAItC,MAAM4B,UAAmBM,MAG9B3G,YAAYiG,EAAUN,EAAMlB,G,UAC1B3B,MAAM2B,G,EAHD,c,EAE8B,U,EAAA,M,sFAEnCvE,KAAK+F,SAAWA,EAChB/F,KAAKyF,KAAOA,GAKhBiB,OAAOrD,iBAAiB,qBAAsBR,IACxCA,EAAM8D,kBAAkBR,GAC1BS,MAAM/D,EAAM8D,OAAOpC,Y,oNC9CR,MAAMV,EAuCnB/D,YAAY+G,EAAe,IAAI,IAC7B/C,EAAM,GADuB,YAE7BgD,GAAc,EAFe,OAG7B9C,EAAS,CACPrC,GAAIkF,EAAaE,KAAKC,GAAQA,EAAKnF,UAAUF,GAC7CsC,MAAO,OALoB,WAO7BgD,GAAa,EAPgB,OAQ7BC,EAAS,MACP,IAAI,8CA9CM,IA8CN,kBA7CG,IA6CH,wBA3CS,KACf,GAAIlH,KAAKmH,UACP,OAKF,GAF2BT,OAAOU,QAAUV,OAAOW,aAAenH,SAASoH,gBAAgBC,aAEnE,CACtBvH,KAAKmH,WAAY,EAEjB,MAAMK,EAAQxH,KAAKoC,KAAKqF,OAClBC,EAAM1H,KAAKoC,KAAKqF,OAASzH,KAAK2H,SAEpC3H,KAAK4H,SAASJ,EAAOE,GAAK,GACvBtD,MAAMC,GAAS,IAAIC,IAAaD,EAAME,QAAS,CAACC,KAAMC,IAAkBJ,QAAQK,QAChFmD,QAAQ,IAAM7H,KAAKmH,WAAY,MA4B9B,uBAxBQtE,IACd,MAAMiF,EAASjF,EAAMkF,OAAOC,QAAQ,wCAEpC,IAAKF,EACH,OAQF9H,KAAKiI,KAAKH,EAAOzG,QAAQM,GALV,CACbuG,IAAK,OACLC,KAAM,OAG4BL,EAAOzG,QAAQ4C,UAanDjE,KAAK6G,aAAeA,EACpB7G,KAAKkH,OAASA,EACdlH,KAAK8D,IAAM,IAAIsE,IAAItE,EAAKoB,KACxBlF,KAAK8G,YAAcA,EACnB9G,KAAKgE,OAASA,EACdhE,KAAKiH,WAAaA,EAElBjH,KAAKwF,SACFpB,MAAMC,GAAS,IAAIC,IAAaD,EAAME,QAAS,CAACC,KAAMC,IAAkBJ,QAAQK,QAGrF2D,aAAa1G,EAAIsC,GACfjE,KAAKsI,WAAW3G,EAAIsC,GACpBjE,KAAKuI,WAAWvI,KAAKwI,SAAS7G,EAAIsC,IAGpCwE,aAAa9G,EAAIsC,GACfjE,KAAKsI,WAAW3G,EAAIsC,GACpBjE,KAAK4H,WACFxD,MAAMC,GAAS,IAAIC,IAAaD,EAAME,QAAS,CAACC,KAAMC,IAAkBJ,QAAQK,QAGrF1D,qBACEhB,KAAKO,YAAYmB,OAAO2B,iBAAiB,cAAerD,KAAK0I,eACzD1I,KAAKiH,YACPP,OAAOrD,iBAAiB,SAAUrD,KAAK2I,gBAI3C,eACE3I,KAAKC,QAAUC,SAASC,cAAc,OACtCH,KAAKC,QAAQG,UAAYJ,KAAKK,SAC9BL,KAAKC,QAAUD,KAAKC,QAAQK,kBAC5BN,KAAKO,YAAcP,KAAKQ,eAAeR,KAAKC,eAEtCD,KAAK4H,WAEX5H,KAAKgB,qBAGP,eAAewG,EAAQ,EAAGE,EAAM1H,KAAK2H,SAAU5G,GAAS,GACtDf,KAAK8D,IAAII,aAAa0E,IAAI,QAAS5I,KAAKgE,OAAOrC,IAC/C3B,KAAK8D,IAAII,aAAa0E,IAAI,SAAU5I,KAAKgE,OAAOC,OAChDjE,KAAK8D,IAAII,aAAa0E,IAAI,SAAUC,OAAOrB,IAC3CxH,KAAK8D,IAAII,aAAa0E,IAAI,OAAQC,OAAOnB,IAEzC1H,KAAKC,QAAQ6I,UAAUC,IAAI,0BAE3B,MAAM3G,QAAa4G,YAAUhJ,KAAK8D,KAE9B/C,EACFf,KAAKiJ,WAAW7G,GAEhBpC,KAAKuI,WAAWnG,GAGlBpC,KAAKC,QAAQ6I,UAAUxH,OAAO,0BAGhC4H,eAAeC,EAAMC,GACfA,EACFpJ,KAAK8D,IAAII,aAAa0E,IAAIO,EAAMC,GAEhCpJ,KAAK8D,IAAII,aAAamF,OAAOF,GAIjC,aAAajF,EAAe,IAC1BvD,OAAO2I,QAAQpF,GAAcrD,QAAQ,EAAEsI,EAAMC,KAAWpJ,KAAKkJ,eAAeC,EAAMC,UAC5EpJ,KAAK4H,WAGbU,WAAW3G,EAAIsC,GACbjE,KAAKgE,OAAS,CAACrC,KAAIsC,SAEnB,MAAM,OAACvC,EAAD,MAAS6H,GAASvJ,KAAKO,YAE7BmB,EAAON,iBAAiB,mBACrBP,QAAQiH,IACPA,EAAOzG,QAAQ4C,MAAQA,IAG3BvC,EAAO8H,cAAe,aAAY7H,OAAQ8H,YAAYF,GAGxDG,cACM1J,KAAKoC,KAAKqF,OACZzH,KAAKC,QAAQ6I,UAAUxH,OAAO,wBAE9BtB,KAAKC,QAAQ6I,UAAUC,IAAI,wBAI/BR,WAAWnG,GACTpC,KAAKoC,KAAOA,EACZpC,KAAKO,YAAYkF,KAAKrF,UAAYJ,KAAK2J,aAAavH,GACpDpC,KAAK0J,cAGPT,WAAW7G,GACTpC,KAAKoC,KAAKwH,QAAQxH,GAElB,MAAMyH,EAAO3J,SAASC,cAAc,OACpC0J,EAAKzJ,UAAYJ,KAAK2J,aAAavH,GACnCpC,KAAKO,YAAYkF,KAAK1E,UAAU8I,EAAKC,YAErC9J,KAAK0J,cAGP,eACE,MAAQ,2IAGA1J,KAAK6G,aAAakD,IAAIjC,GAAU9H,KAAKgK,cAAclC,IAASmC,KAAK,wVAW3ED,eAAc,GAACrI,EAAD,MAAKC,EAAL,SAAYC,IAOxB,MAAQ,sDACuCF,MAAOE,EAAW,mBAAqB,kBAAkB7B,KAAKgE,OAAOC,0BACxGrC,qBACND,IAAO3B,KAAKgE,OAAOrC,GATX,wIASwB,yBAKxCgI,aAAavH,GACX,OAAOA,EAAK2H,IAAIG,GAAOlK,KAAKmK,eAAeD,IAAMD,KAAK,IAGxDE,eAAeD,GACb,OAAIlK,KAAKkH,OACC,kDACiClH,KAAKkH,OAAOgD,mBAC/ClK,KAAKoK,YAAYF,2BAIf,0DAEFlK,KAAKoK,YAAYF,6BAM3BE,YAAYhI,GACV,OAAOpC,KAAK6G,aACTkD,IAAI,EAAEpI,KAAItB,cAAcA,EAAWA,EAAS+B,EAAKT,IAAQ,qCAAoCS,EAAKT,YAClGsI,KAAK,IAGVzJ,eAAeS,GACb,MAAMC,EAAS,GAEf,IAAK,MAAMC,KAAcF,EAAOG,iBAAiB,kBAC/CF,EAAOC,EAAWE,QAAQpB,SAAWkB,EAEvC,OAAOD,EAGTI,SACMtB,KAAKC,SACPD,KAAKC,QAAQqB,SAIjBC,UACEvB,KAAKsB,SACLtB,KAAKC,QAAU,KACfD,KAAKO,YAAc,GACfP,KAAKiH,YACPP,OAAO2D,oBAAoB,SAAUrK,KAAK2I,gBAI9CV,KAAKtG,EAAIsC,GACHjE,KAAK8G,YACP9G,KAAKqI,aAAa1G,EAAIsC,GAEtBjE,KAAKyI,aAAa9G,EAAIsC,GAI1BuE,SAAS7G,EAAIsC,GACX,MAAMqG,EAAetK,KAAK6G,aAAaE,KAAKe,GAAUA,EAAOnG,KAAOA,GAC9DG,EAAWwI,EAAaxI,SAExBC,EAAe,CACnBwI,OAAQ,CAACvI,EAAQC,IAAWD,EAAOwI,cAAcvI,EAAQ,CAAC,KAAM,MAAO,CAACwI,UAAW,UACnFC,OAAQ,CAAC1I,EAAQC,IAAWD,EAASC,EACrC0I,OAAQL,EAAavI,cAGjB6I,EAAY,CAChB1C,IAAK,EACLC,MAAO,GAGT,MAAO,IAAInI,KAAKoC,MAAM6F,KAAK,CAACjG,EAAQC,IAClC2I,EAAU3G,GAASlC,EAAaD,GAAUE,EAAOL,GAAKM,EAAON,Q,oMCxQnE,MAAMkJ,EAAaC,IAASA,EAAKC,SAAW,EAAI,GAAK,EAE/CC,EAAW,IAAIC,MAAM,GACxBC,KAAK,GACLnB,IAAI,CAACoB,EAAGC,IAAU,IAAIlJ,MAAK,IAAIA,MAAOmJ,QAAQD,KAC9CnD,KAAK,CAACqD,EAAIC,IAAOV,EAAWS,GAAMT,EAAWU,IAC7CxB,IAAIe,GAAQA,EAAKzI,mBAAmBC,IAAQ,CAAEkJ,QAAS,WAEpDC,EAAS,IAAIR,MAAM,IACtBC,KAAK,GACLnB,IAAI,CAACoB,EAAGC,IAAU,IAAIlJ,MAAK,IAAIA,MAAOsB,SAAS4H,IAAQ/I,mBAAmBC,IAAQ,CAAEE,MAAO,UAE/E,MAAMmB,EA+DnB7D,aAAY,KACEmD,EAAO,IAAIf,KADb,GAEEkB,EAAK,IAAIlB,OACR,8CAhED,IAgEC,sBA9DA,KACRlC,KAAKC,QAAQ6I,UAAU4C,SAAS,oBAGnC1L,KAAK2L,gBAFL3L,KAAK4L,iBA4DM,yBAtDG/I,IAChB,MAAMgJ,EAAShJ,EAAMkF,OAAOC,QAAQ,sBAEpC,IAAK6D,EACH,OAGF,MAAMC,EAAe,IAAI5J,KAAK2J,EAAOxK,QAAQ+H,OAE7C,IAAKpJ,KAAK+L,iBAOR,OALA/L,KAAK+L,kBAAmB,EACxB/L,KAAKgM,cAAgBF,EAErB9L,KAAKiM,sBACLJ,EAAO/C,UAAUC,IAAI,8BAKvB/I,KAAK+L,kBAAmB,EAExB,MAAMG,EAAe1H,GAAQ,IAAItC,KAAKiK,KAAK3H,GAAMxE,KAAKgM,cAAc7J,UAAW2J,EAAa3J,YAE5FnC,KAAKoM,cAAcnJ,KAAOiJ,EAAa,OACvClM,KAAKoM,cAAchJ,GAAK8I,EAAa,OAGrClM,KAAKiM,eAAe,CAAC,+BACrBjM,KAAKqM,cACLrM,KAAKsM,cACLtM,KAAK2L,kBAuBQ,yBApBG9I,IACDA,EAAMkF,OAAOC,QAAQ,iBAElChI,KAAK2L,kBAiBM,sBAbA,KACb3L,KAAKuM,oBAAsBvM,KAAKwM,SAASxM,KAAKuM,qBAAsB,GACpEvM,KAAKyM,eAAezM,KAAKuM,uBAWZ,qBARD,KACZvM,KAAKuM,oBAAsBvM,KAAKwM,SAASxM,KAAKuM,qBAC9CvM,KAAKyM,eAAezM,KAAKuM,uBAOzBvM,KAAKoM,cAAgB,CAACnJ,OAAMG,MAC5BpD,KAAKuM,oBAAsBvM,KAAK0M,gBAAgBzJ,GAEhDjD,KAAKwF,SACLxF,KAAKgB,qBAGP0L,gBAAgB5B,GACd,MAAM6B,EAAU,IAAIzK,KAAK4I,GAEzB,OADA6B,EAAQtB,QAAQ,GACTsB,EAGTH,SAAS1B,EAAM8B,EAAsB,GACnC,MAAMD,EAAU,IAAIzK,KAAK4I,GAEzB,OADA6B,EAAQnJ,SAASmJ,EAAQlJ,WAAamJ,GAC/BD,EAGTE,OAAO/B,EAAMgC,EAAoB,GAC/B,MAAMH,EAAU,IAAIzK,KAAK4I,GAEzB,OADA6B,EAAQtB,QAAQsB,EAAQI,UAAYD,GAC7BH,EAGTnH,SACE,MAAM,KAACvC,EAAD,GAAOG,GAAMpD,KAAKoM,cAExBpM,KAAKC,QAAUC,SAASC,cAAc,OACtCH,KAAKC,QAAQG,UAAa,yIAGQ,IAAI4M,KAAKC,eAAe3K,KAAQ4K,OAAOjK,kDACzC,IAAI+J,KAAKC,eAAe3K,KAAQ4K,OAAO9J,2HAKvEpD,KAAKC,QAAUD,KAAKC,QAAQK,kBAC5BN,KAAKO,YAAcP,KAAKQ,eAAeR,KAAKC,SAG9CkN,cAAcC,GACZpN,KAAKO,YAAY8M,SAASjN,UAAa,4OAKjCJ,KAAKsN,iBAAiBtN,KAAK0M,gBAAgBU,yEAG3CpN,KAAKsN,iBAAiBtN,KAAK0M,gBAAgB1M,KAAKwM,SAASY,2BAI/DpN,KAAKqM,cAELrM,KAAKuN,UAAUlK,iBAAiB,QAASrD,KAAKwN,cAC9CxN,KAAKyN,WAAWpK,iBAAiB,QAASrD,KAAK0N,aAGjDjB,eAAeW,GACb,IAAItC,EAAO9K,KAAK0M,gBAAgBU,GAEhCpN,KAAKO,YAAY8M,SAASjM,iBAAiB,0BACxCP,QAAQuI,IACPA,EAAMhJ,UAAYJ,KAAKsN,iBAAiBxC,GACxCA,EAAO9K,KAAKwM,SAAS1B,KAGzB9K,KAAKqM,cAGPiB,iBAAiBxC,GACf,MAAQ,+EAEcW,EAAOX,EAAKrH,gBAAgBgI,EAAOX,EAAKrH,2FAGxDuH,EAASjB,IAAIX,GAAU,QAAOA,WAAea,KAAK,0EAGlDjK,KAAK2N,SAAS7C,GAAMf,IAAIX,GAASpJ,KAAK4N,WAAWxE,IAAQa,KAAK,0BAKtE0D,SAASE,GACP,MAAMC,EAAQ,GAEd,IAAIC,EAAUF,EACd,KAAOE,EAAU/N,KAAKwM,SAASqB,IAC7BC,EAAMlE,KAAKmE,GACXA,EAAU/N,KAAK6M,OAAOkB,GAGxB,OAAOD,EAGTF,WAAW9C,GACT,MAAMkD,EAA2B,IAAnBlD,EAAKiC,UAAmB,wBAAuBlC,EAAWC,MAAW,GACnF,MAAQ,uEACwDA,EAAK5H,kBAAkB8K,eACjFlD,EAAKiC,mCAKbvM,eAAeS,GACb,MAAMC,EAAS,GAEf,IAAK,MAAMC,KAAcF,EAAOG,iBAAiB,kBAC/CF,EAAOC,EAAWE,QAAQpB,SAAWkB,EAEvC,OAAOD,EAGTF,qBACEhB,KAAKO,YAAY0N,MAAM5K,iBAAiB,QAASrD,KAAKkO,cACtDlO,KAAKO,YAAY8M,SAAShK,iBAAiB,QAASrD,KAAKmO,iBACzDjO,SAASmD,iBAAiB,QAASrD,KAAKoO,gBAAiB,CAACC,SAAS,IAGrEzC,eACO5L,KAAKO,YAAY8M,SAASiB,mBAC7BtO,KAAKmN,cAAcnN,KAAKoM,cAAcnJ,MAExCjD,KAAKC,QAAQ6I,UAAUC,IAAI,oBAG7B4C,gBACE3L,KAAKC,QAAQ6I,UAAUxH,OAAO,oBAGhCgL,cACE,MAAM,KAACrJ,EAAD,GAAOG,GAAMpD,KAAKoM,cAExBpM,KAAKO,YAAY0C,KAAKsL,YAAc,IAAIvB,KAAKC,eAAe3K,KAAQ4K,OAAOjK,GAC3EjD,KAAKO,YAAY6C,GAAGmL,YAAc,IAAIvB,KAAKC,eAAe3K,KAAQ4K,OAAO9J,GAEzEpD,KAAKC,QAAQuO,cAAc,IAAIC,YAAY,cAAe,CACxDC,SAAS,EACT1L,OAAQ,CAACC,OAAMG,SAInBmK,UACE,OAAOvN,KAAKO,YAAY8M,SAAS7D,cAAc,uCAGjDiE,WACE,OAAOzN,KAAKO,YAAY8M,SAAS7D,cAAc,wCAGjDyC,eAAe0C,EAAS,CAAC,6BAA8B,2BAA4B,kCACjF,MAAMC,EAAYD,EAAO5E,IAAIX,GAAU,IAAGA,GAASa,KAAK,MACxDjK,KAAKO,YAAY8M,SAASjM,iBAAiBwN,GACxC/N,QAAQuI,GAASA,EAAMN,UAAUxH,UAAUqN,IAGhDtC,cACE,MAAM,KAACpJ,EAAD,GAAOG,GAAMpD,KAAKoM,cAExBpM,KAAKO,YAAY8M,SAASjM,iBAAiB,sBACxCP,QAAQuI,IACP,MAAM0B,EAAO,IAAI5I,KAAKkH,EAAM/H,QAAQ+H,OAEhC0B,EAAK3I,YAAcc,EAAKd,UAC1BiH,EAAMN,UAAUC,IAAI,8BAEX3F,GAAM0H,EAAK3I,YAAciB,EAAGjB,UACrCiH,EAAMN,UAAUC,IAAI,4BAEX3F,GAAM0H,EAAO7H,GAAQ6H,EAAO1H,GACrCgG,EAAMN,UAAUC,IAAI,mCAK5BzH,SACMtB,KAAKC,SACPD,KAAKC,QAAQqB,SAIjBC,UACErB,SAASmK,oBAAoB,QAASrK,KAAKoO,gBAAiB,CAAEC,SAAS,IAEvErO,KAAKsB,SACLtB,KAAKC,QAAU,KACfD,KAAKO,YAAc","file":"sales-index-js-7.js","sourcesContent":["export default class BasePage {\n  element;\n  subElements = {};\n  components = {};\n\n  constructor(path) {\n\n  }\n\n  async render() {\n    this.element = document.createElement('div');\n    this.element.innerHTML = this.template;\n    this.element = this.element.firstElementChild;\n    this.subElements = this.getSubElements(this.element);\n\n    this.components = await this.getComponents();\n\n    Object.keys(this.components).forEach(key => {\n      this.subElements[key].append(this.components[key].element);\n    });\n\n    this.initEventListeners();\n\n    return this.element;\n  }\n\n  initEventListeners() {\n\n  }\n\n  get template() {\n    return `<div></div>`;\n  }\n\n  getSubElements(parent) {\n    const result = {};\n\n    for (const subElement of parent.querySelectorAll('[data-element]')) {\n      result[subElement.dataset.element] = subElement;\n    }\n    return result;\n  }\n\n  async getComponents() {\n    return {};\n  }\n\n  remove() {\n    if (this.element) {\n      this.element.remove();\n    }\n  }\n\n  destroy() {\n    this.remove();\n    this.element = null;\n    this.subElements = {};\n    Object.values(this.components).forEach(component => component.destroy());\n    this.components = {};\n  }\n}\n","import { LOCALE } from '../../constants/index.js';\n\nconst header = [\n  {\n    id: 'id',\n    title: 'ID',\n    sortable: true,\n    sortType: 'number'\n  },\n  {\n    id: 'user',\n    title: 'Клиент',\n    sortable: true,\n    sortType: 'string'\n  },\n  {\n    id: 'createdAt',\n    title: 'Дата',\n    sortable: true,\n    sortType: 'custom',\n    sortFunction: (value1, value2) => new Date(value1).getTime() - new Date(value2).getTime(),\n    template: data => {\n      return `\n        <div class='sortable-table__cell'>\n          ${new Date(data).toLocaleDateString(LOCALE, { year: 'numeric', month: 'long', day: 'numeric' })}\n        </div>\n      `;\n    }\n  },\n  {\n    id: 'totalCost',\n    title: 'Стоимость',\n    sortable: true,\n    sortType: 'number',\n    template: data => {\n      return `\n        <div class='sortable-table__cell'>\n          $${data.toLocaleString(LOCALE)}\n        </div>\n      `;\n    }\n  },\n  {\n    id: 'delivery',\n    title: 'Статус',\n    sortable: true,\n    sortType: 'string',\n  },\n];\n\nexport default header;\n","import BasePage from '../base-page/index.js';\nimport RangePicker from '../../components/range-picker/index.js';\nimport SortableTable from '../../components/sortable-table/index.js';\nimport Notification from '../../components/notification/index.js';\nimport { NOTIFICATION_TYPE, ORDERS_REST_URL } from '../../constants/index.js';\nimport header from './sales-header.js';\n\nexport default class Page extends BasePage {\n  onDateSelect = event => {\n    this.updateComponents({\n      createdAt_gte: new Date(event.detail.from).toISOString(),\n      createdAt_lte: new Date(event.detail.to).toISOString()\n    });\n  }\n\n  constructor(path) {\n    super(path);\n  }\n\n  initEventListeners() {\n    this.element.addEventListener('date-select', this.onDateSelect);\n  }\n\n  get template() {\n    return `\n      <div class=\"sales full-height flex-column\">\n        <div class=\"content__top-panel\">\n          <h1 class=\"page-title\">Продажи</h1>\n          <div data-element=\"rangePicker\"></div>\n        </div>\n        <div data-element=\"sortableTable\" class=\"full-height flex-column\"></div>\n      </div>\n    `;\n  }\n\n  async getComponents() {\n    const today = new Date();\n\n    const to = new Date(today);\n    const from = new Date(today.setMonth(today.getMonth() - 1));\n\n    const rangePicker = new RangePicker({from, to});\n\n    const sortableTable = new SortableTable(header, {\n      url: `${ORDERS_REST_URL}?createdAt_gte=${from.toISOString()}&createdAt_lte=${to.toISOString()}`,\n      sorted: {\n        id: 'createdAt',\n        order: 'desc'\n      }\n    });\n\n    return {\n      rangePicker,\n      sortableTable\n    };\n  }\n\n  async updateComponents(searchParams = {}) {\n    this.components.sortableTable.update(searchParams)\n      .catch(error => new Notification(error.message, {type: NOTIFICATION_TYPE.error}).show());\n  }\n}\n","export const ORDERS_URL = 'api/dashboard/orders';\nexport const SALES_URL = 'api/dashboard/sales';\nexport const CUSTOMERS_URL = 'api/dashboard/customers';\nexport const BESTSELLERS_URL = 'api/dashboard/bestsellers';\n\nexport const PRODUCTS_REST_URL = 'api/rest/products';\nexport const CATEGORIES_REST_URL = 'api/rest/categories';\nexport const SUBCATEGORIES_REST_URL = 'api/rest/subcategories';\nexport const ORDERS_REST_URL = 'api/rest/orders';\n\nexport const BACKEND_URL = process.env.BACKEND_URL;\nexport const IMGUR_UPLOAD_URL = process.env.IMGUR_UPLOAD_URL;\nexport const IMGUR_CLIENT_ID = process.env.IMGUR_CLIENT_ID;\n\nexport const LOCALE = process.env.LOCALE;\n\nexport const NOTIFICATION_TYPE = {\n  success: 'success',\n  error: 'error'\n};\n","export default class Notification {\n\n  static currentNotification = null;\n\n  constructor(message = '', {duration = 2000, type = ''} = {}) {\n    this.message = message;\n    this.duration = duration;\n    this.type = type;\n    this.render();\n  }\n\n  render() {\n    this.element = document.createElement('div');\n    this.element.innerHTML = `\n      <div class=\"notification notification_${this.type} show\">\n        <div class=\"notification-body notification__content\">${this.message}</div>\n      </div>\n    `;\n    this.element = this.element.firstElementChild;\n  }\n\n  show(element = document.body) {\n    if (Notification.currentNotification) {\n      Notification.currentNotification.remove();\n    }\n\n    element.append(this.element);\n\n    this.timeoutId = setTimeout(() => {this.remove()}, this.duration)\n    Notification.currentNotification = this;\n  }\n\n  remove() {\n    if (this.element) {\n      this.element.remove();\n    }\n    clearTimeout(this.timeoutId);\n  }\n\n  destroy() {\n    this.remove();\n    this.element = null;\n    Notification.currentNotification = null;\n  }\n}\n","// same as fetch, but throws FetchError in case of errors\n// status >= 400 is an error\n// network error / json error are errors\n\nexport default async function(url, params) {\n  let response;\n\n  try {\n    // NOTE: \"toString\" call needed for correct work of \"jest-fetch-mock\"\n    response = await fetch(url.toString(), params);\n  } catch(err) {\n    throw new FetchError(response, \"Network error has occurred.\");\n  }\n\n  let body;\n\n  if (!response.ok) {\n    let errorText = response.statusText; // Not Found (for 404)\n\n    try {\n      body = await response.json();\n\n      errorText = (body.error && body.error.message) || (body.data && body.data.error && body.data.error.message) || errorText;\n    } catch (error) { /* ignore failed body */ }\n\n    let message = `Error ${response.status}: ${errorText}`;\n\n    throw new FetchError(response, body, message);\n  }\n\n  try {\n    return await response.json();\n  } catch(err) {\n    throw new FetchError(response, null, err.message);\n  }\n}\n\nexport class FetchError extends Error {\n  name = \"FetchError\";\n\n  constructor(response, body, message) {\n    super(message);\n    this.response = response;\n    this.body = body;\n  }\n}\n\n// handle uncaught failed fetch through\nwindow.addEventListener('unhandledrejection', event => {\n  if (event.reason instanceof FetchError) {\n    alert(event.reason.message);\n  }\n});\n\n","import Notification from '../notification/index.js';\nimport fetchJson from '../../utils/fetch-json.js';\nimport { NOTIFICATION_TYPE, BACKEND_URL } from '../../constants/index.js';\n\nexport default class SortableTable {\n  element;\n  subElements = {};\n  pageSize = 30;\n\n  onWindowScroll = () => {\n    if (this.isRunning) {\n      return;\n    }\n\n    const isScrolledToBottom = window.scrollY + window.innerHeight >= document.documentElement.scrollHeight;\n\n    if (isScrolledToBottom) {\n      this.isRunning = true;\n\n      const start = this.data.length;\n      const end = this.data.length + this.pageSize;\n\n      this.loadData(start, end, true)\n        .catch(error => new Notification(error.message, {type: NOTIFICATION_TYPE.error}).show())\n        .finally(() => this.isRunning = false);\n    }\n  }\n\n  onPointerDown = event => {\n    const column = event.target.closest('.sortable-table__cell[data-sortable]');\n\n    if (!column) {\n      return;\n    }\n\n    const toggle = {\n      asc: 'desc',\n      desc: 'asc'\n    };\n\n    this.sort(column.dataset.id, toggle[column.dataset.order]);\n  }\n\n  constructor(headerConfig = [], {\n    url = '',\n    sortLocally = false,\n    sorted = {\n      id: headerConfig.find(item => item.sortable).id,\n      order: 'asc'\n    },\n    scrollable = true,\n    rowUrl = null\n  } = {}) {\n    this.headerConfig = headerConfig;\n    this.rowUrl = rowUrl;\n    this.url = new URL(url, BACKEND_URL);\n    this.sortLocally = sortLocally;\n    this.sorted = sorted;\n    this.scrollable = scrollable;\n\n    this.render()\n      .catch(error => new Notification(error.message, {type: NOTIFICATION_TYPE.error}).show());\n  }\n\n  sortOnClient(id, order) {\n    this.updateSort(id, order);\n    this.renderRows(this.sortData(id, order));\n  }\n\n  sortOnServer(id, order) {\n    this.updateSort(id, order);\n    this.loadData()\n      .catch(error => new Notification(error.message, {type: NOTIFICATION_TYPE.error}).show());\n  }\n\n  initEventListeners() {\n    this.subElements.header.addEventListener('pointerdown', this.onPointerDown);\n    if (this.scrollable) {\n      window.addEventListener('scroll', this.onWindowScroll);\n    }\n  }\n\n  async render() {\n    this.element = document.createElement('div');\n    this.element.innerHTML = this.template;\n    this.element = this.element.firstElementChild;\n    this.subElements = this.getSubElements(this.element);\n\n    await this.loadData();\n\n    this.initEventListeners();\n  }\n\n  async loadData(start = 0, end = this.pageSize, append = false) {\n    this.url.searchParams.set('_sort', this.sorted.id);\n    this.url.searchParams.set('_order', this.sorted.order);\n    this.url.searchParams.set('_start', String(start));\n    this.url.searchParams.set('_end', String(end));\n\n    this.element.classList.add('sortable-table_loading');\n\n    const data = await fetchJson(this.url);\n\n    if (append) {\n      this.appendRows(data);\n    } else {\n      this.renderRows(data);\n    }\n\n    this.element.classList.remove('sortable-table_loading');\n  }\n\n  setSearchParam(name, value) {\n    if (value) {\n      this.url.searchParams.set(name, value);\n    } else {\n      this.url.searchParams.delete(name);\n    }\n  }\n\n  async update(searchParams = {}) {\n    Object.entries(searchParams).forEach(([name, value]) => this.setSearchParam(name, value));\n    await this.loadData();\n  }\n\n  updateSort(id, order) {\n    this.sorted = {id, order};\n\n    const {header, arrow} = this.subElements;\n\n    header.querySelectorAll('[data-sortable]')\n      .forEach(column => {\n        column.dataset.order = order;\n      });\n\n    header.querySelector(`[data-id=\"${id}\"]`).appendChild(arrow);\n  }\n\n  toggleEmpty() {\n    if (this.data.length) {\n      this.element.classList.remove('sortable-table_empty');\n    } else {\n      this.element.classList.add('sortable-table_empty');\n    }\n  }\n\n  renderRows(data) {\n    this.data = data;\n    this.subElements.body.innerHTML = this.getTableRows(data);\n    this.toggleEmpty();\n  }\n\n  appendRows(data) {\n    this.data.push(...data);\n\n    const rows = document.createElement('div');\n    rows.innerHTML = this.getTableRows(data);\n    this.subElements.body.append(...rows.childNodes);\n\n    this.toggleEmpty();\n  }\n\n  get template() {\n    return `\n      <div class=\"sortable-table\">\n        <div data-element=\"header\" class=\"sortable-table__header sortable-table__row\">\n          ${this.headerConfig.map(column => this.getHeaderCell(column)).join('')}\n        </div>\n        <div data-element=\"body\" class=\"sortable-table__body\"></div>\n        <div data-element=\"loading\" class=\"loading-line sortable-table__loading-line\"></div>\n        <div data-element=\"emptyPlaceholder\" class=\"sortable-table__empty-placeholder\">\n          <div>Нет данных</div>\n        </div>\n      </div>\n    `;\n  }\n\n  getHeaderCell({id, title, sortable}) {\n    const arrow =`\n      <span data-element=\"arrow\" class=\"sortable-table__sort-arrow\">\n        <span class=\"sort-arrow\"></span>\n      </span>\n    `;\n\n    return `\n      <div class=\"sortable-table__cell\" data-id=\"${id}\" ${sortable ? 'data-sortable=\"\"' : ''} data-order=\"${this.sorted.order}\">\n        <span>${title}</span>\n        ${id === this.sorted.id ? arrow : ''}\n      </div>\n    `;\n  }\n\n  getTableRows(data) {\n    return data.map(row => this.getRowTemplate(row)).join('');\n  }\n\n  getRowTemplate(row) {\n    if (this.rowUrl) {\n      return `\n        <a class=\"sortable-table__row\" href=\"${this.rowUrl(row)}\">\n          ${this.getTableRow(row)}\n        </a>\n      `;\n    } else {\n      return `\n        <div class=\"sortable-table__row\">\n          ${this.getTableRow(row)}\n        </div>\n      `;\n    }\n  }\n\n  getTableRow(data) {\n    return this.headerConfig\n      .map(({id, template}) => template ? template(data[id]) : `<div class='sortable-table__cell'>${data[id]}</div>`)\n      .join('');\n  }\n\n  getSubElements(parent) {\n    const result = {};\n\n    for (const subElement of parent.querySelectorAll('[data-element]')) {\n      result[subElement.dataset.element] = subElement;\n    }\n    return result;\n  }\n\n  remove() {\n    if (this.element) {\n      this.element.remove();\n    }\n  }\n\n  destroy() {\n    this.remove();\n    this.element = null;\n    this.subElements = {};\n    if (this.scrollable) {\n      window.removeEventListener('scroll', this.onWindowScroll);\n    }\n  }\n\n  sort(id, order) {\n    if (this.sortLocally) {\n      this.sortOnClient(id, order);\n    } else {\n      this.sortOnServer(id, order);\n    }\n  }\n\n  sortData(id, order) {\n    const sortedColumn = this.headerConfig.find(column => column.id === id);\n    const sortType = sortedColumn.sortType;\n\n    const sortFunction = {\n      string: (value1, value2) => value1.localeCompare(value2, ['ru', 'en'], {caseFirst: 'upper'}),\n      number: (value1, value2) => value1 - value2,\n      custom: sortedColumn.sortFunction\n    };\n\n    const direction = {\n      asc: 1,\n      desc: -1\n    };\n\n    return [...this.data].sort((value1, value2) =>\n      direction[order] * sortFunction[sortType](value1[id], value2[id])\n    );\n  }\n}\n","import { LOCALE } from '../../constants/index.js';\n\nconst getWeekday = date => (date.getDay() + 7 - 1) % 7;\n\nconst WEEKDAYS = new Array(7)\n  .fill(1)\n  .map((_, index) => new Date(new Date().setDate(index)))\n  .sort((d1, d2) => getWeekday(d1) - getWeekday(d2))\n  .map(date => date.toLocaleDateString(LOCALE, { weekday: 'short' }));\n\nconst MONTHS = new Array(12)\n  .fill(1)\n  .map((_, index) => new Date(new Date().setMonth(index)).toLocaleDateString(LOCALE, { month: 'long'}))\n\nexport default class RangePicker {\n  element;\n  subElements = {};\n\n  onInputClick = () => {\n    if (!this.element.classList.contains('rangepicker_open')) {\n      this.openSelector();\n    } else {\n      this.closeSelector();\n    }\n  }\n\n  onSelectorClick = event => {\n    const button = event.target.closest('.rangepicker__cell');\n\n    if (!button) {\n      return;\n    }\n\n    const selectedDate = new Date(button.dataset.value);\n\n    if (!this.selectionStarted) {\n      // start new selection\n      this.selectionStarted = true;\n      this.selectionFrom = selectedDate;\n\n      this.clearSelection();\n      button.classList.add('rangepicker__selected-from');\n      return;\n    }\n\n    // finish selection\n    this.selectionStarted = false;\n\n    const getSelection = type => new Date(Math[type](this.selectionFrom.getTime(), selectedDate.getTime()));\n\n    this.selectedRange.from = getSelection('min');\n    this.selectedRange.to = getSelection('max');\n\n    // clear previous selection in case first selected date > second selected date\n    this.clearSelection(['rangepicker__selected-from']);\n    this.doSelection();\n    this.updateInput();\n    this.closeSelector();\n  }\n\n  onExternalClick = event => {\n    const target = event.target.closest('.rangepicker');\n    if (!target) {\n      this.closeSelector();\n    }\n  }\n\n  moveBackward = () => {\n    this.calendarVisibleFrom = this.addMonth(this.calendarVisibleFrom, -1);\n    this.updateCalendar(this.calendarVisibleFrom);\n  }\n\n  moveForward = () => {\n    this.calendarVisibleFrom = this.addMonth(this.calendarVisibleFrom);\n    this.updateCalendar(this.calendarVisibleFrom);\n  }\n\n  constructor({\n                from = new Date(),\n                to = new Date()\n              }) {\n    this.selectedRange = {from, to};\n    this.calendarVisibleFrom = this.firstDayOfMonth(from);\n\n    this.render();\n    this.initEventListeners();\n  }\n\n  firstDayOfMonth(date) {\n    const newDate = new Date(date);\n    newDate.setDate(1);\n    return newDate;\n  }\n\n  addMonth(date, numberOfMonthsToAdd = 1) {\n    const newDate = new Date(date);\n    newDate.setMonth(newDate.getMonth() + numberOfMonthsToAdd);\n    return newDate;\n  }\n\n  addDay(date, numberOfDaysToAdd = 1) {\n    const newDate = new Date(date);\n    newDate.setDate(newDate.getDate() + numberOfDaysToAdd);\n    return newDate;\n  }\n\n  render() {\n    const {from, to} = this.selectedRange;\n\n    this.element = document.createElement('div');\n    this.element.innerHTML = `\n      <div class=\"rangepicker\">\n        <div class=\"rangepicker__input\" data-element=\"input\">\n          <span data-element=\"from\">${new Intl.DateTimeFormat(LOCALE).format(from)}</span> -\n          <span data-element=\"to\">${new Intl.DateTimeFormat(LOCALE).format(to)}</span>\n        </div>\n        <div class=\"rangepicker__selector\" data-element=\"selector\"></div>\n      </div>\n    `;\n    this.element = this.element.firstElementChild;\n    this.subElements = this.getSubElements(this.element);\n  }\n\n  buildSelector(dateFrom) {\n    this.subElements.selector.innerHTML = `\n      <div class=\"rangepicker__selector-arrow\"></div>\n      <div class=\"rangepicker__selector-control-left\"></div>\n      <div class=\"rangepicker__selector-control-right\"></div>\n      <div class=\"rangepicker__calendar\">\n        ${this.getCalendarMonth(this.firstDayOfMonth(dateFrom))}\n      </div>\n      <div class=\"rangepicker__calendar\">\n        ${this.getCalendarMonth(this.firstDayOfMonth(this.addMonth(dateFrom)))}\n      </div>\n    `;\n\n    this.doSelection();\n\n    this.getLeft().addEventListener('click', this.moveBackward);\n    this.getRight().addEventListener('click', this.moveForward);\n  }\n\n  updateCalendar(dateFrom) {\n    let date = this.firstDayOfMonth(dateFrom);\n\n    this.subElements.selector.querySelectorAll('.rangepicker__calendar')\n      .forEach(value => {\n        value.innerHTML = this.getCalendarMonth(date);\n        date = this.addMonth(date);\n      });\n\n    this.doSelection();\n  }\n\n  getCalendarMonth(date) {\n    return `\n      <div class=\"rangepicker__month-indicator\">\n        <time dateTime=\"${MONTHS[date.getMonth()]}\">${MONTHS[date.getMonth()]}</time>\n      </div>\n      <div class=\"rangepicker__day-of-week\">\n        ${WEEKDAYS.map(value => `<div>${value}</div>`).join('')}\n      </div>\n      <div class=\"rangepicker__date-grid\">\n        ${this.getDates(date).map(value => this.renderDate(value)).join('')}\n      </div>\n    `;\n  }\n\n  getDates(fromDate) {\n    const dates = [];\n\n    let current = fromDate;\n    while (current < this.addMonth(fromDate)) {\n      dates.push(current);\n      current = this.addDay(current);\n    }\n\n    return dates;\n  }\n\n  renderDate(date) {\n    const style = date.getDate() === 1 ? `style=\"--start-from: ${getWeekday(date)}\"` : '';\n    return `\n      <button type=\"button\" class=\"rangepicker__cell\" data-value=\"${date.toISOString()}\" ${style}>\n        ${date.getDate()}\n      </button>\n    `;\n  }\n\n  getSubElements(parent) {\n    const result = {};\n\n    for (const subElement of parent.querySelectorAll('[data-element]')) {\n      result[subElement.dataset.element] = subElement;\n    }\n    return result;\n  }\n\n  initEventListeners() {\n    this.subElements.input.addEventListener('click', this.onInputClick);\n    this.subElements.selector.addEventListener('click', this.onSelectorClick);\n    document.addEventListener('click', this.onExternalClick, {capture: true});\n  }\n\n  openSelector() {\n    if (!this.subElements.selector.childElementCount) {\n      this.buildSelector(this.selectedRange.from);\n    }\n    this.element.classList.add('rangepicker_open');\n  }\n\n  closeSelector() {\n    this.element.classList.remove('rangepicker_open');\n  }\n\n  updateInput() {\n    const {from, to} = this.selectedRange;\n\n    this.subElements.from.textContent = new Intl.DateTimeFormat(LOCALE).format(from);\n    this.subElements.to.textContent = new Intl.DateTimeFormat(LOCALE).format(to);\n\n    this.element.dispatchEvent(new CustomEvent('date-select', {\n      bubbles: true,\n      detail: {from, to}\n    }));\n  }\n\n  getLeft() {\n    return this.subElements.selector.querySelector('.rangepicker__selector-control-left');\n  }\n\n  getRight() {\n    return this.subElements.selector.querySelector('.rangepicker__selector-control-right');\n  }\n\n  clearSelection(tokens = ['rangepicker__selected-from', 'rangepicker__selected-to', 'rangepicker__selected-between']) {\n    const selectors = tokens.map(value => `.${value}`).join(', ');\n    this.subElements.selector.querySelectorAll(selectors)\n      .forEach(value => value.classList.remove(...tokens));\n  }\n\n  doSelection() {\n    const {from, to} = this.selectedRange;\n\n    this.subElements.selector.querySelectorAll('.rangepicker__cell')\n      .forEach(value => {\n        const date = new Date(value.dataset.value);\n\n        if (date.getTime() === from.getTime()) {\n          value.classList.add('rangepicker__selected-from');\n\n        } else if (to && date.getTime() === to.getTime()) {\n          value.classList.add('rangepicker__selected-to');\n\n        } else if (to && date > from && date < to) {\n          value.classList.add('rangepicker__selected-between');\n        }\n      });\n  }\n\n  remove() {\n    if (this.element) {\n      this.element.remove()\n    }\n  }\n\n  destroy() {\n    document.removeEventListener('click', this.onExternalClick, { capture: true });\n\n    this.remove();\n    this.element = null;\n    this.subElements = {};\n  }\n}\n"],"sourceRoot":""}